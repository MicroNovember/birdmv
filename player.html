<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ÔøΩ ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏û‡∏•‡πÄ‡∏¢‡∏≠‡∏£‡πå</title>

    <!-- üîó Video.js CSS -->
    <link href="https://vjs.zencdn.net/8.6.1/video-js.css" rel="stylesheet" />

    <style>
        body {
            margin: 0;
            background: #0f172a;
            color: #fff;
            font-family: 'Segoe UI', 'DM Sans', 'Noto Sans Thai', sans-serif;
        }

        .container {
            max-width: 900px;
            margin: auto;
            padding: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            /* ‡πÄ‡∏û‡∏¥‡πà‡∏° padding-bottom ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
            padding-bottom: 24px; /* ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ */
        }

        .video-js {
            width: 100%;
            max-height: 60vh;
            border-radius: 8px;
        }

        .controls-bar {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            margin-top: 16px;
            flex-wrap: wrap;
        }

        .controls-bar button {
            /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 1.5 ‡πÄ‡∏ó‡πà‡∏≤ */
            padding: 8px 14px;
            font-size: 15px;   /* ‡πÄ‡∏î‡∏¥‡∏° 15px */
            border-radius: 6px;
            border: none;
            background: #1f2937;
            color: #5ab9ff;
            cursor: pointer;
        }

        #resume-dialog {
            background: rgba(0,0,0,0.85);
            padding: 20px;
            border-radius: 8px;
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            display: none;
            text-align: center;
            /* ‡πÄ‡∏û‡∏¥‡πà‡∏° pointer-events: none; ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏î‡∏±‡∏Å‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà */
            pointer-events: none;
        }

        #resume-dialog button {
            margin: 8px;
            padding: 8px 16px;
            border-radius: 6px;
            border: none;
            background-color: #3b82f6;
            color: white;
            cursor: pointer;
        }

        #audio-info {
            color: #5ab9ff;
            font-size: 16px;
            font-weight: 600;
            text-align: center;
            margin: 4px 0 12px;
            text-shadow: 0 0 3px rgba(0, 80, 255, 0.2);
        }

        #movie-title {
            color: #5ab9ff;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin: 12px 0;
            text-shadow: 0 0 3px rgba(0, 80, 255, 0.2);
        }

        @media (max-width: 600px) {
            .controls-bar {
                flex-direction: column;
                align-items: center;
            }

            .controls-bar button {
                /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° */
                font-size: 18px; /* ‡πÄ‡∏î‡∏¥‡∏° 14px, ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏≤‡∏Å‡πÄ‡∏ó‡πà‡∏≤‡∏ö‡∏ô‡πÄ‡∏î‡∏™‡∏Å‡πå‡∏ó‡πá‡∏≠‡∏õ */
                padding: 10px 18px; /* ‡πÄ‡∏î‡∏¥‡∏° 6px 12px */
            }
            /* ‡πÄ‡∏û‡∏¥‡πà‡∏° padding-bottom ‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
            .container {
                padding-bottom: 40px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
            }
        }
    </style>
</head>
<body>

<div class="container">
    <h2 id="movie-title">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</h2>
    <p id="audio-info"></p>
    <!-- ‡∏•‡∏ö element ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏≠‡∏≠‡∏Å ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ Video.js ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏ö‡∏ô‡πÅ‡∏ñ‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° -->

    <video
        id="my-player"
        class="video-js vjs-big-play-centered"
        controls
        preload="auto"
        playsinline
        data-setup="{}"
    >
        <source id="video-source" src="" type="video/mp4" />
        ‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©‡∏Ñ‡πà‡∏∞ ‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠
    </video>

    <div class="controls-bar">
        <button id="fav-btn">‚ù§Ô∏è ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡∏î</button>
        <button onclick="location.href='index.html'" style="display: flex; align-items: center; gap: 6px;">
            <svg width="20" height="20" fill="#5ab9ff" viewBox="0 0 24 24"><path d="M12 3l10 9h-3v9h-6v-6h-2v6H5v-9H2z"/></svg>
            ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
        </button>
    </div>
</div>

<div id="resume-dialog">
    <p id="resume-message">‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡πÑ‡∏´‡∏°?</p>
    <div>
        <button id="resume-yes">‡∏î‡∏π‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡πÄ‡∏î‡∏¥‡∏°</button>
        <button id="resume-no">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
    </div>
</div>

<script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>
<!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏±‡πä‡∏Å‡∏≠‡∏¥‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö HLS ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πà‡∏ô .m3u8 ‡πÑ‡∏î‡πâ -->
<script src="https://unpkg.com/@videojs/http-streaming@3.7.0/dist/videojs-http-streaming.min.js"></script>

<script>
    const params = new URLSearchParams(location.search);
    const name = params.get("name") || "‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏ä‡∏∑‡πà‡∏≠";
    const info = (params.get("info") || params.get("audio") || "").trim();
    const rawUrl = params.get("url") || "";
    const image = params.get("image") || "";
    const videoURL = decodeURIComponent(rawUrl);

    document.getElementById("movie-title").textContent = name;
    const audioInfoElem = document.getElementById("audio-info");
    if (audioInfoElem) {
        audioInfoElem.textContent = info ? "‡πÄ‡∏™‡∏µ‡∏¢‡∏á: " + info : "";
    }

    const videoSource = document.getElementById("video-source");
    const favBtn = document.getElementById("fav-btn");
    const resumeDialog = document.getElementById("resume-dialog");

    if (videoURL) {
        videoSource.src = videoURL;
        if (videoURL.endsWith(".m3u8")) {
            videoSource.type = "application/x-mpegURL";
        }
    }

    const player = videojs("my-player");
    player.volume(0.3);

    if (image) {
        player.poster(image);
    }

    const watchKey = "watch_" + videoURL;
    let watchData = null;
    try {
        watchData = JSON.parse(localStorage.getItem(watchKey) || "null");
    } catch {}

    player.ready(() => {
        if (watchData?.currentTime > 20) {
            player.pause();
            const mins = Math.floor(watchData.currentTime / 60);
            const secs = String(Math.floor(watchData.currentTime % 60)).padStart(2, "0");
            document.getElementById("resume-message").textContent = `‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡∏î‡∏π "${name}" ‡∏ñ‡∏∂‡∏á‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏µ‡πà ${mins}:${secs} `;
            
            // ‡πÅ‡∏™‡∏î‡∏á dialog ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô pointer-events
            resumeDialog.style.display = "block";
            resumeDialog.style.pointerEvents = "auto";

            document.getElementById("resume-yes").onclick = () => {
                // ‡∏ã‡πà‡∏≠‡∏ô dialog ‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô pointer-events
                resumeDialog.style.display = "none";
                resumeDialog.style.pointerEvents = "none";
                setTimeout(() => player.currentTime(watchData.currentTime), 10);
                setTimeout(() => player.play(), 100);
            };

            document.getElementById("resume-no").onclick = () => {
                // ‡∏ã‡πà‡∏≠‡∏ô dialog ‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô pointer-events
                resumeDialog.style.display = "none";
                resumeDialog.style.pointerEvents = "none";
                setTimeout(() => player.currentTime(0), 10);
                setTimeout(() => player.play(), 100);
            };
        }
    });

    player.on("timeupdate", () => {
        const progress = {
            name,
            url: videoURL,
            image,
            currentTime: player.currentTime(),
            duration: player.duration(),
            lastWatched: Date.now()
        };
        localStorage.setItem(watchKey, JSON.stringify(progress));
    });

    function updateFavUI() {
        const favs = JSON.parse(localStorage.getItem("favorites") || "[]");
        const isFav = favs.some(m => m.url === videoURL);
        favBtn.textContent = isFav ? "üíî ‡∏•‡∏ö‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡∏î" : "‚ù§Ô∏è ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡∏î";
    }

    favBtn.addEventListener("click", () => {
        let favs = JSON.parse(localStorage.getItem("favorites") || "[]");
        const index = favs.findIndex(m => m.url === videoURL);
        if (index >= 0) {
            favs.splice(index, 1);
        } else {
            favs.push({ name, url: videoURL, image });
        }
        localStorage.setItem("favorites", JSON.stringify(favs));
        updateFavUI();
    });

    updateFavUI();
</script>
</body>
</html>
ÔøΩ